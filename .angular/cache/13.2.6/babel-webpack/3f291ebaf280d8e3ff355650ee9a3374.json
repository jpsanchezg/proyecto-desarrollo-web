{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/user-controller/user-controller.service\";\nimport * as i2 from \"../service/product-controller/product-controller.service\";\nimport * as i3 from \"../service/invoice-controller/invoice-controller.service\";\nimport * as i4 from \"../product-card/product-card.component\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/router\";\n\nfunction ShoppingCartComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const purchase_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.productController.findProductById(purchase_r1.getProductId()).getName(), \" x\", purchase_r1.getQuantity(), \" \");\n  }\n}\n\nconst _c0 = function () {\n  return [\"/finalizar\"];\n};\n\nexport let ShoppingCartComponent = /*#__PURE__*/(() => {\n  class ShoppingCartComponent {\n    constructor(userController, productController, invoiceController) {\n      this.userController = userController;\n      this.productController = productController;\n      this.invoiceController = invoiceController;\n      this.currentUser = userController.getCurrentUser();\n    }\n\n    getCartSubtotal() {\n      let subtotal = 0;\n\n      for (let purchase of this.currentUser.getShoppingCart()) {\n        subtotal += this.productController.findProductById(purchase.getProductId()).getPrice() * purchase.getQuantity();\n      }\n\n      return subtotal;\n    }\n\n    buyCart() {\n      if (this.currentUser.getShoppingCart().length != 0) {\n        this.invoiceController.addInvoice(this.currentUser.getUsername(), this.currentUser.getShoppingCart());\n        this.currentUser.removeAllPruchases();\n        this.userController.modUser(\"\", this.currentUser.getUsername(), \"\", this.currentUser.getShoppingCart());\n      }\n    }\n\n    ngOnInit() {}\n\n  }\n\n  ShoppingCartComponent.ɵfac = function ShoppingCartComponent_Factory(t) {\n    return new (t || ShoppingCartComponent)(i0.ɵɵdirectiveInject(i1.UserControllerService), i0.ɵɵdirectiveInject(i2.ProductControllerService), i0.ɵɵdirectiveInject(i3.InvoiceControllerService));\n  };\n\n  ShoppingCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShoppingCartComponent,\n    selectors: [[\"app-shopping-cart\"]],\n    decls: 11,\n    vars: 4,\n    consts: [[1, \"shopping-cart\"], [1, \"title\"], [1, \"cart-detail\"], [1, \"invoice-preview\"], [\"class\", \"invoice-entry\", 4, \"ngFor\", \"ngForOf\"], [1, \"subtotal\"], [1, \"buy-cart\", 3, \"routerLink\", \"click\"], [1, \"invoice-entry\"]],\n    template: function ShoppingCartComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n        i0.ɵɵtext(2, \"Carrito de compras\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelement(4, \"app-product-card\");\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵtemplate(6, ShoppingCartComponent_p_6_Template, 2, 2, \"p\", 4);\n        i0.ɵɵelementStart(7, \"p\", 5);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function ShoppingCartComponent_Template_button_click_9_listener() {\n          return ctx.buyCart();\n        });\n        i0.ɵɵtext(10, \"Comprar\");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.currentUser.getShoppingCart());\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Subtotal $\", ctx.getCartSubtotal(), \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c0));\n      }\n    },\n    directives: [i4.ProductCardComponent, i5.NgForOf, i6.RouterLink],\n    styles: [\".shopping-cart[_ngcontent-%COMP%]{margin-top:5%;font-size:24px}.title[_ngcontent-%COMP%]{text-align:center}.cart-detail[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:45em}app-product-card[_ngcontent-%COMP%]{display:inline-block}.invoice-preview[_ngcontent-%COMP%]{margin-left:2em;display:inline-block;background-color:var(--grey);font-size:24px;padding:1em;margin-top:1em;margin-bottom:auto;vertical-align:top;min-height:1em;min-width:15em}.invoice-entry[_ngcontent-%COMP%]{font-size:.8em}.buy-cart[_ngcontent-%COMP%]{border-radius:15px;height:2em}\"]\n  });\n  return ShoppingCartComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}